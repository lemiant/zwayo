module.exports = function(io){
    io.sockets.on('connection', function (socket) {
        socket.on('join', function(room){
            rooms = io.sockets.manager.roomClients[socket.id]
            for(old_room in rooms){
                if(old_room != '') socket.leave(old_room.slice(1))
            }
            socket.join(room)
            socket.d_room = room
            rooms = io.sockets.manager.roomClients[socket.id]
            console.log(rooms)
        })
        
        socket.on('event', function(event){
            io.sockets.in(socket.d_room).emit('event', event)
        })
    });
}